# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A095143

from math import isqrt, comb
from gmpy2 import digits
def A095143(n):
    g = (m:=isqrt(f:=n+1<<1))-(f<=m*(m+1))
    k = n-comb(g+1,2)
    if sum(int(d) for d in digits(k,3))+sum(int(d) for d in digits(g-k,3))-sum(int(d) for d in digits(g,3))>2: return 0
    s, c, d = digits(g,3), 1, 0
    w = (digits(k,3)).zfill(l:=len(s))
    if l == 1: return comb(g,k)%9
    for i in range(0,l-1):
        r, t = s[i:i+2], w[i:i+2]
        if (x:=int(r,3)) < (y:=int(t,3)):
            d += (t[0]>r[0])+(t[1]>r[1])
            if r[1]>=t[1]:
                c = c*comb(int(r[1],3),int(t[1],3))%9
        else:
            c = c*comb(x,y)%9
    for i in range(1,l-1):
        if w[i]>s[i] or (z:=comb(int(s[i],3),int(w[i],3))) == 3:
            d -= 1
        else:
            c = c*pow(z,-1,9)%9
    return c*3**d%9 # _Chai Wah Wu_, Jul 19 2025

