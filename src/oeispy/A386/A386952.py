# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A386952

import re
from gmpy2 import digits
def A386952(n):
    s = digits(n,3)
    n1 = s.count('1')
    n2 = s.count('2')
    n01 = s.count('10')
    n02 = s.count('20')
    n11 = len(re.findall('(?=11)',s))
    n12 = s.count('21')
    return ((3*((1+n01<<2)+n11)+((n02<<2)+n12<<2))*3**n2<<n1)//3>>2

