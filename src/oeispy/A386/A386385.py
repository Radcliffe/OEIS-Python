# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A386385

def a386385(n):
    m=n+1
    if m<=0: raise ValueError("n>=0")
    M=0x18199818
    def run(N,mode):
        s=[1,1];h=2;p=0;k=0;c=0;y='B'
        def g(u):
            nonlocal s,h
            while len(s)<u:
                t=2 if (h&1)==0 else 1
                s+= [t]*((s[h-1]*2)//t); h+=1
        while k<N:
            g(p+2)
            if s[p]==2: xb='B'; p+=1
            elif p+1<len(s) and s[p]==1 and s[p+1]==1: xb='A'; p+=2
            else: g(p+2); continue
            y = xb if ((M>>(k&31))&1) else ('A' if xb=='B' else 'B')
            c += 2 if y=='A' else 1; k+=1
        return c if mode==0 else y
    lo,hi=0,m
    while lo<hi:
        md=(lo+hi)//2
        if run(md,0)>=m: hi=md
        else: lo=md+1
    return 2 if run(lo,1)=='B' else 1

