# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A368958

from math import gcd
from sympy import isprime
def A368958(n):
    if n<=1 : return 1
    clist = tuple({j for j in range(1,n+1) if j!=i and gcd(i,j)==1 and not isprime(abs(i-j))} for i in range(1,n+1))
    def f(p,q):
        if (l:=len(p))==n-1: yield len(clist[q]-p)
        for d in clist[q]-p if l else set(range(1,n+1))-p:
            yield from f(p|{d},d-1)
    return sum(f(set(),0)) # _Chai Wah Wu_, Jan 19 2024

