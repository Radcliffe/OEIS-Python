# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A389357

# generates sequence and numerical validation between the numerical integration using high-precision quadrature and the closed form formula.
import mpmath as mp
from math import comb
from fractions import Fraction
mp.mp.dps = 80
eps = mp.mpf('1e-12')
def factorial2(n):
    if n <= 0: return 1
    res = 1
    for k in range(n,0,-2): res *= k
    return mp.mpf(res)
def R_frac(n):
    s = Fraction(0,1)
    for j in range(1,2*n+2,2):  # odd j
        s += Fraction(comb(2*n+1,(2*n+1-j)//2), j*j)
    return s / 2**(2*n)
def E(n): return R_frac(n).numerator
def F(n): return R_frac(n).denominator
# Numeric integral
def J_numeric(n):
    f = lambda x: x * mp.cos(x)**(2*n+1)
    return mp.quad(f, [0, mp.pi/2])
# Closed form
def J_formula(n):
    coeff = factorial2(2*n) / factorial2(2*n+1) * mp.pi/2
    return coeff - mp.mpf(E(n)) / mp.mpf(F(n))
print([E(k) for k in range(1,20)])
for n in [1,2,3,5,7]:
    val_num = J_numeric(n)
    val_form = J_formula(n)
    err = abs(val_num - val_form)
    match = err < 10*eps
    print(f"n={n}: match={match}, error={err}")

