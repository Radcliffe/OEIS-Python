# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A346022

from sympy import isprime, nextprime
def isemirp(p): s = str(p); return s != s[::-1] and isprime(int(s[::-1]))
def aupto(limit):
  alst, pvec, evec, p = [], [2, 3, 5, 7], [0, 0, 0, 0], 11
  while pvec[1] <= limit:
    if evec == [0, 1, 1, 0]: alst.append(pvec[1])
    pvec = pvec[1:] + [p]; evec = evec[1:] + [isemirp(p)]; p = nextprime(p)
  return alst
print(aupto(12689)) # _Michael S. Branicky_, Jul 04 2021

