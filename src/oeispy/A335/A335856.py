# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A335856

from sympy import isprime # or use A010051
def square_number(z): return int(4*y**2-y-x if (y := z.imag) >= abs(x := z.real)
    else 4*x**2-x-y if -x>=abs(y) else (4*y-3)*y+x if -y>=abs(x) else (4*x-3)*x+y)
def A335856(n, moves=(1, 1+1j, 1j, 1j-1, -1, -1-1j, -1j, 1-1j)):
    if not hasattr(A:=A335856, 'terms'): A.terms=[1]; A.pos=0
    while len(A.terms) < n:
        try: move = min((1-isprime(s), s, z) for d in moves if
                        (s := square_number(z := A.pos+d)+1)not in A.terms)
        except ValueError:
            raise IndexError(f"Sequence has only {len(A.terms)} terms")
        A.terms.append(move[1]); A.pos = move[2]
    return A.terms[n-1]
A335856(999) # gives IndexError: Sequence has only 720 terms
A335856.terms # shows all 720 terms; append [:N] to see only N terms
# _M. F. Hasler_, May 13 2025

