# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A335973

def between(i, j, k):
  return i < j < k or i > j > k
def dead_end(k):
  rest, last = divmod(k, 10)
  if last in {0, 9}: return True
  return abs(rest%10 - last) <= 1
def aupto(n, seed=13):
  train, used = [seed], {seed}
  for n in range(2, n+1):
    caboose = train[-1]
    cabbody, cabhook = divmod(caboose, 10)
    h1, h2 = sorted([cabbody%10, cabhook])
    hooks = set(range(h1+1, h2))
    pow10 = 10
    an = min(hooks)*pow10
    while an in used or dead_end(an): an += 1
    hook = an//pow10
    while True:
      if hook in hooks:
        if between(hook, cabhook, an//(pow10//10)%10):
          train.append(an)
          used.add(an)
          break
      else: pow10 *= 10
      an = max(an+1, min(hooks)*pow10)
      while an in used or dead_end(an): an += 1
      hook = an//pow10
  return train    # use train[n-1] for a(n)
print(aupto(65))  # _Michael S. Branicky_, Dec 14 2020

