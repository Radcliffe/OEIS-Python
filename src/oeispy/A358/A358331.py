# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A358331

from math import prod
from sympy import divisors, integer_nthroot
from sympy.utilities.iterables import partitions
def A358331(n):
    divs = {d:n//d-1 for d in divisors(n,generator=True)}
    return sum(1 for s,p in partitions(n,m=max(divs,default=0),size=True) if s in divs and (t:=integer_nthroot(prod(a**b for a, b in p.items()),s))[1] and divs[s]==t[0]) # _Chai Wah Wu_, Sep 24 2023

