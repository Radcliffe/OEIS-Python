# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A361831

from itertools import count
from sympy import isprime
from sympy.utilities.iterables import multiset_permutations, partitions
from gmpy2 import digits
def A361831(n):
    for m in count((n+8)//9):
        c = (t:=10**m)
        for a, b in partitions(n,m=m,k=9,size=True):
            b[0] = (m-a)
            for s in multiset_permutations(b):
                if (lambda n:isprime(n) or n==1)(int('0'+digits(k:=int('0'+''.join(str(d) for d in s)),3).rstrip('0'),3)):
                    c = min(c,k)
        if c < t:
            return c # _Chai Wah Wu_, Mar 30-31 2023

