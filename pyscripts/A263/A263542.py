# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A263542

from itertools import permutations as P
n = 4; m = 4; permutes = P(range(m*n), m+n); counter = 0
for p in permutes:
  grid = [p[:n]]
  for i in range(m-1):
    grid.append([p[n+i]]+[-1]*(n-1))
  grid[1][1] = p[-1]
  s = p[0]+p[1]+p[n]+p[-1]
  has = list(p)
  fail = 0
  for y in range(1,m):
    for x in range(1,n):
      if x == y == 1: continue
      r = s - (grid[y-1][x-1] + grid[y-1][x] + grid[y][x-1])
      if r not in has and 0 <= r < m*n:
        grid[y][x]=r
        has.append(r)
      else:
       fail = 1
       break
    if fail: break
  if not fail:
    counter += 1
print(counter)

