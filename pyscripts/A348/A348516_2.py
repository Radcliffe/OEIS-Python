# This file is auto-generated from OEIS data.
# Please do not edit this file directly.
# OEIS sequence: A348516

h=[0,1,-1]
def d(x):
    y,d=x,0
    while y>0: d,y=d+h[y%3],y//3
    return d
def a(n):
    v,a,x=n,0,1
    while v%3==0: v=v//3
    if v>1:
        while d(x)!=0: a,x=a+1,v*x
    return a
from gmpy2 import digits
def A348516(n):
    k, s = 1, digits(n,3).rstrip('0')
    if s == '1' or s == '': return 1-len(s)
    m = int(s,3)
    mk = m
    while s.count('1') != s.count('2'): k += 1; mk *= m; s = digits(mk,3)
    return k # _Chai Wah Wu_, Nov 11 2021

